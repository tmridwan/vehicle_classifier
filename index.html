---
title: Vehicle Recognizer
layout: page
---

<style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
    h1 { color: #333; }
    #photo { margin: 20px 0; padding: 10px; border: 2px dashed #ccc; }
    #results { margin-top: 20px; }
    img { max-width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .prediction { font-size: 24px; color: #2563eb; font-weight: bold; margin-top: 10px; }
    .loading { color: #666; font-style: italic; }
    .error { color: #dc2626; }
</style>

<h1>Vehicle Recognizer</h1>
<p>Upload an image to classify the vehicle type</p>
<input id="photo" type="file" accept="image/*">
<div id="results"></div>

<script type="module">
    import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client@1.0.0/+esm";

    async function loaded() {
        results.innerHTML = '<p class="loading">Analyzing image...</p>';
        
        try {
            const app = await client("https://tmridwan03-vehicle-recognizer.hf.space");
            const result = await app.predict("/predict", {		
                image: photo.files[0]
            });
            
            console.log('API response:', result);
            
            // Read the file as data URL for display
            const reader = new FileReader();
            reader.onload = function(e) {
                if (result && result.data) {
                    const label = result.data;
                    results.innerHTML = `
                        <img src="${e.target.result}" width="500">
                        <p class="prediction">Prediction: ${label}</p>
                    `;
                } else {
                    results.innerHTML = `
                        <img src="${e.target.result}" width="500">
                        <p class="error">Unexpected API response format</p>
                        <pre>${JSON.stringify(result, null, 2)}</pre>
                    `;
                }
            };
            reader.readAsDataURL(photo.files[0]);
            
        } catch (err) {
            results.innerHTML = `<p class="error">Error: ${err.message}</p>
                <p>Space may still be building. Please wait a few minutes and try again.</p>`;
        }
    }
    
    photo.addEventListener('change', loaded);
</script>
