---
title: Vehicle Recognizer
layout: page
---

<style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
    h1 { color: #333; }
    #photo { margin: 20px 0; padding: 10px; border: 2px dashed #ccc; }
    #results { margin-top: 20px; }
    img { max-width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .prediction { font-size: 24px; color: #2563eb; font-weight: bold; margin-top: 10px; }
    .loading { color: #666; font-style: italic; }
    .error { color: #dc2626; }
</style>

<h1>Vehicle Recognizer</h1>
<p>Upload an image to classify the vehicle type</p>
<input id="photo" type="file" accept="image/*">
<div id="results"></div>

<script>
    async function loaded() {
        const formData = new FormData();
        formData.append("data", photo.files[0]);
        
        results.innerHTML = '<p class="loading">Analyzing image...</p>';
        
        try {
            const response = await fetch("https://tmridwan03-vehicle-recognizer.hf.space/api/predict", {
                method: "POST",
                body: formData
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const json = await response.json();
            console.log('API response:', json);
            
            // Read the file as data URL for display
            const reader = new FileReader();
            reader.onload = function(e) {
                if (json && Array.isArray(json.data)) {
                    const label = json.data[0]; // top_label
                    results.innerHTML = `
                        <img src="${e.target.result}" width="500">
                        <p class="prediction">Prediction: ${label}</p>
                    `;
                } else {
                    results.innerHTML = `
                        <img src="${e.target.result}" width="500">
                        <p class="error">Unexpected API response format</p>
                        <pre>${JSON.stringify(json, null, 2)}</pre>
                    `;
                }
            };
            reader.readAsDataURL(photo.files[0]);
            
        } catch (err) {
            results.innerHTML = `<p class="error">Error: ${err.message}</p>
                <p>Make sure CORS is enabled on your Hugging Face Space.</p>`;
        }
    }
    
    photo.addEventListener('change', loaded);
</script>
